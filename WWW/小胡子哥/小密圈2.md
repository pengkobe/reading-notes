# 小密圈2
> 1月22日起

## 找个什么项目学习比较好
学会分层分块学习，提升会更明显。技能之间要解耦，总想着在一个项目上用上所有的技术，
效果不会很好。**大多数技术和逻辑，跟界面没有关系。**

## 不使用nodejs进行前后端分层
前后端分离跟 nodejs 没有必然的联系，php ruby Python 等需要都有各自的前后端分离方案，Google 搜索的时候加上一个语言关键词应该就可以搜到。
前后端分离话题炒得火热，是因为 web 的发展让前端视觉交互变得越来越复杂，前端承载了太多的业务逻辑，分离之后能够更好的处理数据和视图的关系。
而 nodejs 恰好有事前端擅长的语言，并且有了大公司的实践标杆，加上 nodejs 本身擅长于高并发场景，起到了推波助澜的作用。

## 我是小公司菜鸟
没有场景很难有提升，尽可能为自己制造场景，解决业务问题。
小css 这块多考虑如何做到模块化和复用，让多个项目之间产生共同的部分，在项目中考虑使用预处理语言和打包工具等，尽量创造出以前没有过的场景，只有问题才会逼迫你不断地深入和学习。
但是有一个前提，你能够 hold 住自己的项目，可以考虑在次要或者边缘的项目中使用新技术，等学会了再移植到主要项目中。

## 端性能分析一般怎么做
这个问题挺好的，我会在年后第二个月着重分享这块的经验，总的来说，让页面请求数量最小，请求大小最小，先保证网络耗时最短，然后再考虑程序的执行，按需加载，能不加载的不加载，能慢加载的慢加载，能慢执行的慢执行。
指标可以枚举出几十项，比如请求的个数在6个以内，每个请求的资源大小50kb以下，整体请求的资源在300kb以下，页面滚动的fps在48帧以上，根据这些指标可以进行自动化检测，这样发布的页面性能一定不会太差。

## 理解安卓与web性能差异
1、native 是如何在 js 上下文注入方法的，简单来说就是 native 如何跟前端通讯
2、第二步是了解通讯的内容，js 通过传输 vdom 的 json 对象交给 native 解析，具体了解 json 的格式
了解这两点之后，你就会知道什么样的 vdom 结构会造成性能问题，也会知道 native 有哪些方案解决这些问题了。

## 如何反爬虫
前端能做的太少，动态防御确实有，基本没啥用。但得看爬虫是怎么爬的，对于直接抓源码随便就防住了（前端异步渲染），对于无头浏览器抓取，可以通过随机插入乱码（插入的内容通过 css 隐藏）的方式防御，不过也容易破解。

## web项目结构
MVC，最常见的结构，用过 express 和 koa 的应该比较清楚。也可以看看 thankjs ，360 的，也挺好。

## 2017年前端前景如何？
相比三四年，前端又有了新的定义，有些公司称之为「大前端」，有的公司称之为「端」。

前端的发展表面上跟着技术变革在走，从浏览器的兼容，到语言的拓展，到前端库的五彩斑斓，再到前端框架的盛行…期间 Nodejs 和类 RN 技术也为前端拓展了疆土。然而真正影响前端的依然是企业/公司的发展，业务上期望后端能够提供稳定、全面、智能的数据，更期望前端能够快捷、优雅、轻便地展示这些数据和内容。

毫无疑问，2017 年，前端这个行业依然是异彩缤纷，但是在内容上会有几个侧重点。

一个是多端的融合，Phone/Pad/Watch/TV 等，不论是客户端还是 Web 端在语言底层、开发工具和交互体验上都会出现高度一致，这是企业节省成本而产生的必然趋势，但并不是说 Android/iOS 工程师就可以下岗了，恰恰相反，前端对客户端的理解过于肤浅，2017 年前端和客户端必须紧紧抱成团才会有成绩出来。

另一个是高度封装的智能硬件，前端正在「入侵」这个领域，可以看看这个链接 Ruff。在大学学过一点硬件编程，深深感受到这个领域的门槛之高，但随着嵌入式技术的不断发展，现已经可以高效地跑 JavaScript Runtime 了。

JavaScript run everywhere，这个口号让人血脉膨胀。这几年太多人往前端这个岗位上撞，有的人撞得头破血流，最后不得已放弃；有的人咬咬牙，找准了方向，很顺利地在这个岗位上留了下来。

相比一般的职业，前端工程师的待遇确实还不错，但是我的感觉是，已经慢慢出现中低端市场的产能过剩问题，切几个页面，建一个网站，做一个 App，能做这些事情的人越来越多，而且报价也越来越低，最后这些工作一部分会收敛到几家公司或者几个平台手上（肯定不会是 2017 年，还没有产出规范和标准），当然，另一部分个性化工作依然需要人力处理。

当各大公司将前端基础定型之后（前端会不断发展，所谓的定型就是基本能够满足市场需求），前端方向对资深人士的渴望度会大幅上涨，要求前端从安全、性能、架构、运维等多个方面考虑应用的开发，这种人才也就是我们经常谈及的「全栈工程师」。大公司会更加偏好专才，因为一堆专业资深人士聚合到一起就是一个超级强大的「全栈工程师」。

----

P.S. 淘宝这边已经不叫前端工程师了，叫做「端工程师」。

## 前端代码CI完成后，测试通过如何上线？
```
1、 提交 -> 构建 -> 测试 -> 发布
                               ？ 
2、提交 -> 构建 ----> 发布
                     |        ↑
                  测试 ---------
```
你这里缺少一个流程“预发布”，构建成功后，你的代码就应该预发布出去，这个时候预发也方便直接使用构建后的代码进行预发调试；如果测试服务器测试失败，发布操作是直接禁止的，发布的条件应该有两个，一个是代码已经预发布，并且测试用例都是跑通的。
简单来说，你这里的问题是没有把 builder 的代码挪出来，放在一个可靠的地方，而是扔给了 tester，然后把发布工作交给了 tester。

## 云构建
就是将本地开发代码推送到服务器统一构建。为什么需要云构建呢？
1、开发环境不一致，机器、系统、软件、版本差异等；
2、构建脚本不一致，gulp、grunt、webpack，用到的插件、组件等，开发者可以随意修改；
3、发布源码可追溯、无需 build 后再发布

## 研究生毕业做了一年半测试的工作跳槽前端
很多行业尤其是互联网技术，10000 小时是跑不掉的，很多经验丰富的同学，学历不一定有多高，能力不一定有多强，但人家就是经验丰富，但要说有没有捷径，我觉得是有的。
你可以把自己打造成一个全端全栈小能手，去任何公司都不成问题。但是你没有那么多时间，你还有你的工作。
所以，首先，**你需要有一个明确的目标，在前端哪个领悟上短时间内提升，是 node、工程化、性能、webVR、rx、rn，还是非常强的业务能力？你需要给自己一个定位**。
项目经历少，没有沉淀，没有突出的贡献，没有大公司光环，如果我是面试官，可能在筛选简历的时候就直接刷了。
前端不再是简单的 html js css 了，对前端的理解可以全面一些，发表一些文章、一些观点，让人家看到一个全面的你。

## nodejs实现了前后端分离
前后端分离在 13 年就开始了，所谓的分离就是加了一个中间层，让后端专注于业务数据的开发，前端拥有了更加广阔的天地。
目前淘宝、天猫、支付宝等 BU 都有自己的前后端分离实践，比如淘宝的 Midway，内部搞了一段时间的 Nick，还有支付宝的 eggjs，目前已经开源，都为前端提供了非常多的场景。
所以有一大波的工程师，尤其是 资深/专家 这一波人，近几年都在这个领悟上撞，也出来了新的一批专家和资深专家。
但是 nodejs 毕竟还是前端在玩的，后端 java 体系十几年了，稳固无比，nodejs 抢占了一点份额，但相比之下，相形见绌。
nodejs 需要业务场景支撑，这一点很重要，没有场景，没有专家，没有勇气的团队永远做不好 nodejs.
nodejs具体做什么工作呢？渲染页面？然后数据都是java服务提供么？会不会直接操作缓存、数据库、hbase之类的？
小胡子哥 回复 koa express 用过吧，差不多，多了些优化，跟业务关联度更好。
王 回复 如果原先业务本身是java，那么接入nodejs会不会有接口上的困难？
王 回复 既然nodejs不能完全替代java，我还是想知道nodejs到底负责什么内容，是自己直接去数据库取数据、做缓存，还是说数据是java服务器提供的，nodejs只是中间一层，然后拼出html页面？
小胡子哥 回复 这个问题需要回到前后端分离能够解决什么样地问题。传统的前后端交互模式，基本都是前端写好 demo，然后交给 Java 去拼接页面，这里的沟通成本很高，效率很低，出错率也很高，毕竟后端不懂前端，拿着前端代码折腾俩下就报错了。
小胡子哥 回复 所以后面出现了让前端来写 java 的 vm 模板，代码的发布和前后端交流依然很麻烦。
王 回复 你说的vm模板是指jsp？
小胡子哥 回复 nodejs 的出现就是为了让后端完全不关心前端代码，node 层调用后端接口，自己处理好之后渲染，到了客户端前端再处理剩余逻辑。
王 回复 可不可以这样理解，分离的最终结果是消灭了jsp，然后前端直接写html？
小胡子哥 回复 嗯，是的。你也可以去 Google 和知乎找两篇文章阅读一下，比我在这里三两句解释得要清楚。
王 回复 最近公司在尝试上nodejs来，这些工作都是前端来做，可是之前没有服务器端的经验。于是接触后发现，之前java调用的那些服务都是用java写的，而且还接触到了数据库，zookeeper，消息队列，分布式，部署，容器等等这些知识，一时之间完全不知道该怎么入手了。不知道阿里node在服务端浸入多深了，这些都需要了解吗？
小胡子哥 回复 都以组件插件和形式沉淀出来了，使用者稍微看看文档就会了。这些内容都是必须了解的。
王 回复 如果让我自己用nodejs个个人的小项目玩玩完全没压力，但是一接入到企业级产品上就深感力不从心，知识太匮乏了。遇到的困难是之前做前端所没有经历过的。
王 回复 你说的组件、插件，是指node版本的组件和插件么？
小胡子哥 回复 是的，当然每个组件和插件背后都可能对应一个集团的服务，这个服务不一定是 node 的。
小胡子哥 回复 这是一次很好的机会，你把握好了，做好了，对以后职业发展应该挺好的。
王 回复 那当初做这些node插件/组件库的人现在应该已经是资深专家了吧，当初做这些东西的时候这些人是什么背景？纯前端么？最近搜集这方面的资料，发现如果要是具备分布式、数据库、大数据、缓存，以及运维相关知识的，在后端工程师里面也不算初级了。
小胡子哥 回复 是的，一个系统和平台不是一两个人能做出来的，也不是一两天能够做出来的，很多都是专家级别的人在开发和维护。
王 回复 谢谢你的回答，我了解到很多有价值的信息
行陌路 回复 我想知道是不是在node中用request去请求java数据接口？我之前尝试这么做过，这个方式请求耗时比较多


## 如何对一些模拟起来比较不方便的场景下的代码进行测试
模拟不方便有两种情况，一是代码架构不好，写代码没注意测试问题；二是前端 UI，难以自动化测试。
纯客户端前端代码，测试挺少的，不太好做，但是会有基础测试，持续集成的。发布之前走一遍测试系统，测试诸如 js 错误、外站链接、死链接等等，有几十项。
node 这块没啥好说的，有覆盖率基准，测试代码必须写全，尤其是关键组件和框架。
node 的测试文件都在项目仓库下，提交时触发检测 hook.

## 怎么学vue
首先看一眼文档，把所有 API 都读一遍，很多框架看完 API 大概就能猜到底层如何实现了。
然后，除非手头比较闲，否则就把它晾在一边了。等到项目需要的时候再去深入学习，拿着它这两个 demo，再深入些，去研究它的源码，看看框架的设计思路。
最后，再业务中有使用后，会去看看它的性能，插件，组件，社区等，甚至会贡献一些代码。


## 能力不足的老人怎么培育新人
多给新人场景，让他们去做一件事情，而不是实现一个点，多给他们空间和权利，即使 review 进度，多指导，多让他们发言。
可以每周开一次周会，让他们分享业务心得，技术学习和生活琐事。
多去发现和发展他们擅长的技能，让他们尽可能多的去思考如何把业务做好。

## 1年非科班前端希望进大公司
类似的问题我之前回答过，看了有必要把之前回答过的内容做一番整理。
前端技能树如果真的要全部点亮，至少有一百项之多，初涉前端建议把关键技能和前端基础搞好再去涉猎更广的内容。
小公司最大的毛病就是杂事儿多，人一少，需要承担的事情也多。
很多人可能一直忙于应付工作，都没来得及去思考如何解脱自己，就算想到了如何解脱，也不知道该从哪里下手。
建议在业务中多给自己创造场景，尽可能多的使用已经掌握的新技术。你可以去看看你想去的大公司招聘要求是怎么样的，依葫芦画瓢，要求什么你就学什么，学到了就用到项目中去，然后沉淀、总结，时间长了之后，所谓的经验也就丰富起来了。
但比如工程化、Node、架构等，这些概念和技术，没有环境和人引导的情况下，确实很难提升，这一点就只能靠你业务时间的坚持了，坚持学习，坚持总结，不断的找坑，然后填坑。

## vue
vue 就是一双筷子，如何使用筷子，你可以看筷子的说明文档和使用教程，跟着一步一步来，它的文档写得很好，没理由一直跟着学还学不会。但是用筷子吃牛排就有点麻烦了，就像你要用 vue 去做一个富文本编辑器，刚开始就让你实现这么复杂的需求肯定是有困难的，到那个时候你再把你的困难说出来。
不是你的问题欠妥，而是面对一项陌生的技术，没有养成固定的模式学习。你这个问题换成"如何从零到一快速掌握 Vue 这门陌生的技术"。
小胡子哥 回复 黑钦王 ：  不用担心新技术的出现，不用怕，也不要抵触，先了解这项技术解决了哪些问题，是通过什么方式解决的，只有知道一项技术的背景，你才能够在正确的场景中使用它。
小胡子哥 回复 黑钦王 ：  在 Google Twitter Facebook 这些巨头公司的引领下，如今开源的各类技术都特别在意文档的可读性，先跟着文档走一遍，把基础的 API 学会，后续拔高不会有啥难度。

## 可以直接export为啥还要merge
好吧，看明白了，这个很常见的。由于开发环境比较复杂，极有可能存在日常、预发、测试、线上、灰度等六七种环境，这个时候如何保证每种环境都可以正常呢？最简单的方式就是以某种环境(比如日常)为标准，其他环境都通过 merge 来修改配置。
有些配置是很多很复杂的，但是这六七种环境有大部分都相同，所以可以通过 merge 方式处理。
但是对于简单环境，可以直接写 exports，没啥必要 merge。

## 怎样选 hybrid 方案
你可以列一个清单，端能力、css 支持度、DSL、调试方案等，先列出十几项，去找答案，最后对比一下，你决策不了就让你的老板决策，也能够让人家看到你确实下了功夫






## 名言
业务当中的抽象能力很重要，驾驭这种能力，才能够把业务的上下游关系、业务逻辑中的模块结构关系厘清。站在抽象模型上思考问题，能够清楚地看清问题的全貌，从而将内外因素、动静因素、变和不变分析出来。
提升这种能力最直接的方式就是画图，画架构图、模型图、流程图等，有些人画出来的图没几个人看得懂，太乱了，各种线交叉，没有层级感，没有模块概念。


