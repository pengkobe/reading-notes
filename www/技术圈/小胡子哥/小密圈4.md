## 小密圈3
> 3.11 ~ 3.31

## 一个类里需要依赖另一个类,非继承
`这个问题在面向对象的基本原则里头已经给了我们答案，建议将外部类通过参数传入到目标类中，这样解耦程度会比较高，也容易控制。`

## Vue操作 Dom
`vue 和 react 就是为了让你别去碰 DOM，你可以将变化作用在变量上，然后让变量去改变视图的展现。`

## 非编程专业出身刚入行，怎么成为第二个小胡子哥
```
前端没有三五年前那么单纯了，那时候国内普遍还在考虑 IE6 的兼容性问题，而现在，前端的概念发生了变化，有人叫它大前端，也有人叫它端。
不管是做技术的哪一个分支，技术广度和深度都是后期进阶的必需品。技术广度靠自己平时不断地涉猎新的知识领悟，找到前端的边界，而知识的深度，需要花大功夫训练，这件事情急不得。
如果你觉得自己已经能够看清前端的发展轨迹了，这时候，可以考虑选择一个点，深入进去，比如 nodejs，webVR，3d，native-like，安全等等，其实可以选择的领悟还是挺多的。
在大公司有一个好处，那便是可以现在一个高度平视（而不是仰视）技术的发展，没那么累，可以很快的掌握技术动向，毕竟有些技术是由大公司引领的，耳濡目染，也便懂了一些。
小公司没有这么多的机会，其实也没什么。工作的时候不断打破自己的舒适区，长久下来就能看到自己的成长。所谓的舒适区，就是用简单的技术解决简单的问题，遇到复杂的问题却不愿意用复杂的技术。
做一些你觉得自己做不了的事情，一年做一两件，不在多，这件事情最好有了持续性。
```

## 阅读源码吗？
```
我很少分析源码，有些源码我觉得写的很烂，看到效果，基本能够知道后面的原理是什么，除非我遇到了一些性能问题，才会看看源码是如何实现的。

源码的阅读主要了解作者解决问题的思路，以及代码结构，细节不用太关心。
```

## 应届生浮躁问题
```
问题有点多哈，应届生大多数都会心浮气躁，这里的心浮气躁其实并非贬义词。指的是，搞事情停留在表面比较多，很少从更加全面的视角来看待一个问题。
什么是全面的视角？一个问题出来，
解决它是第一步，很多人到这一步就结束了。其实还有第二步、第三步需要做的。
第二步，找到这个问题的根源，是人的问题还是系统的问题还是流程的问题，找到根本原因，分析出来，理出一个清晰的脉络出来。
第三步，是去推动解决根源问题，你如果有能力，就亲自上，遇到阻力及时请求支援，只要你的节奏分明，资源会自己过来。如果是帮助平台解决问题，需要深入跟他们沟通，从体验、流程等多个当年提出你的看法。
如果你是一个喜欢分享的同学，那么还有第四步和第五步。
第四步，做好整个问题的还原和解决方案记录，写下来，或者沉淀一个工具出来，帮助团队其他同学解决这类问题。
第五步，你可以将这些方案，分享出去。分享两个字很简单，要达到好的效果，需要做很多事情的。
以上说的是如果正确的解决一个问题。
```

## 初学入门成长路线
```
初学者，我是比较推荐看几个视频入门的，好的视频会一步一步教你把所有的代码都码出来，而且在教学过程中还帮你解决了环境设置问题。但是已经入门的同学，需要学会自主学习。
上面你提到的课程都属于编程方面的基本课程，算法、数据结构还有 JS/CSS 基础内容。这些内容是必须牢牢掌握的，所以不论你是通过视频学习、书籍学习还是网上博客学习，你都需要把最基础的知识掌握好。掌握这些内容，确实需要点时间，得沉下心坚持一年。
至于学习的顺序，你现在已经工作了，业务为重，业务中比较少用到算法、数据结构等知识，建议你将 JS 基础搞扎实，然后及时跟进社区的变化，了解最新技术的使用背景和使用方式。
比如，你可以去写几个小游戏，打地鼠、抓红包、钓鱼等等，写游戏是很锻炼编程能力的，一个游戏的代码量一般都会超过 500 行，要保证 500 行代码一气呵成，这需要一点功底。
```

## 我是二本我自卑，现在做外包
```
重点本科的学生，他们的优势在于经历了高考，证明了他们学习能力很强（也可能是记忆力很强），然后大学具备良好的教学环境，对他们的成长很有益处。然而他们走进工作岗位，对新的工作环境依然是陌生的，从见识层面，大家都在同一起跑线上。所以，也不要对比耿耿于怀。
大家都知道，这几年，前后端技术变化很大，这个发展的速度只会变得更快，眼前 VR/AR 就是一个很明显的趋势。一觉醒来，不论你是高中学历还是学士学历，眼前的新技术都是需要我们从零开始学习的。

你可能也发现了，我们学习的这些技术，并不会有很深的逻辑，基本就是 API 学习，底层的封装已经相当完善了，业务层的同学不需要对底层了解太多。

所以很多技术岗，就需要不断的学习，填充脑子里缺少的那些 API。
外包公司有个特点，流动性大、业务不持久，很多事情拿到手里切切页面，调调接口就完了，更多的是沟通成本。如果你期望在外包公司大幅度提升自己的前端层级，这个可能性不大，但是外包可以让你成为一个熟练工，面对大、中需求，可以游刃有余地评估时间、处理问题。
我建议你，在这家公司学习的过程中，尽可能地去了解前端工程、前端架构类的知识，提升自己对前端的认知，不断问自己，如果你手下有三五个人的团队，如何提升工作效率，如何让这三五个人高效地支持业务。
同时，尽可能地去理解业务，这个相当重要。外包公司把一件事情当作任务来做，而正式员工会把这件事情当作项目/产品来做，自然，最后两者收益会不一样，最后的差距也会越来越大。
```

## 小胡子哥非上班时间干啥
```
周末干的最频繁的一件事是网上看博文，耗时最长的一件事是看视频和微博。

我经常会集中一段时间学习某一个知识体系或者一堆零散的知识点，比如代理、翻墙，比如最新框架、github trending 等等。

工作中会在查询的时候遇到一些与工作无关的内容，我会使用 chrome 的插件 onetab 收集起来，有空的时候统一阅读。

我经常使用零散的时间看小密圈，比如现在，蹲坑中

邮件订阅了比较多的日报和周报，国外的 weekly，monthly collection 等，阅读这些内容要点时间。

会根据工作，或者个人发展的需要，阅读一些技术书籍，比如算法、数据库、设计模式、docker、黑客、大数据、远程调试等，一般会购买电子书，使用 kindle 阅读。

```

## 前后端怎么配合，比如接口定义
这个答案厉害了，给出了业务开发新思路
```
接口定义谁定义没有太多关系，定义好之前也可以进行开发，毕竟接口只是对数据的包装，后端要做数据库相关工作，前端要做静态页面工作。

问出这个问题，只能说，你所在公司在前后端上得耦合程度还特别高。

很多大公司，已经不会把那么多心思放在前后端之间的沟通上，前端和后端的开发是并行的。

甚至有些情况前后端并不需要约定接口。而是填补数据时，通过一次映射将前端自己约定的接口也后端进行匹配。

更加常见的情况是，前端开发好业务模块，提供给模块平台；后端开发好业务数据，提供给数据平台。运营在搭建平台上搭建页面，从模块平台检索模块，然后将数据平台的数据导入/映射到模块上。

这样做可以节省很大的成本，而且可以提高模块的复用率，事实上，淘宝就已经沉淀了几万个模块，平时的中小活动都是运营自己搭建的页面，前端不操心。

```

## 不想堆代码
```
不断的问自己，代码量是不是可以再减少一些，然后多看看人家写的框架代码，对比差异。
精简代码就是局部架构的过程。
```

## 自问自答:好架构师
```
“一个架构师， 好的架构师， 就是反复做四件事： 第一，先选一个好的挑战， 第二， 把简单的东西想复杂 ； 第三， 把复杂的东西做简单； 第四， 最后把复杂的东西讲简单。

做第一件事是为了创造价值， 第二件事是为了控制好风险和准备好未来， 做第三件事请是为了做好产品且控制好成本， 而做第四件事情是为了做好传承。”
“烂的吗， 就是反过来： 选一个不值得做的问题， 把复杂的问题想简单， 把简单的东西做复杂， 把简单的东西讲复杂。”

“好的架构师需要对业务和技术都有很深的认知和理解，具备很强的业务抽象和泛化能力，能从业务中提炼出通用的技术框架和执行流程，通过适用于不同业务的业务数据，控制逻辑实现对多种业务场景的拼装和定制化。”
“平衡取舍，对业务的理解，眼光和胸怀”
“一个合格的架构师能高效的根据对业务架构和业务问题及挑战的深入理解设计出合理的技术方案及架构，从技术宏观方向上能把握符合未来趋势的技术路线和发展方向，从微观方向能提炼和沉淀基础性的、公共的、可复用的框架和组件。”
```

## 懒加载延迟问题
```
首先你要明确，你的首屏有多高，是否有一个标准？你的页面开发是以模块为纬度还是更大颗粒为唯独，或者整个页面就是一次性渲染？

首屏直接加载只有一个方案，就是输出时就带上 url，我们称之为首屏同步输出。这里的问题在于，你需要预定义一个首屏，并且还需要知道哪些图片在首屏，这只能人肉控制，当然，这个控制成本也并不高。

而如果你的页面是以模块纬度渲染，你可以在渲染首屏模块的时候去掉图片懒加载。
```

## 前后端分离问题集锦
[链接](https://github.com/xingmolu/translation/issues/1)
```
这是工程化和模块化开发遇到的相当典型的问题。
你可以这么做，模块的 layout 所依赖的资源作为一种规范，模块的本地开发和预览远程拉取规范资源。这样就解决了规范更新的问题。
回:  嗯，我们考虑过这个。但是没法解决平台更新后，各个业务需要重新打包编译生成新的静态文件，然后再部署

规范内容，一定是无业务逻辑的，与模块无耦合的。模块通过 npm 或者 bower 等方式挂载依赖，多个模块合并到 layout 预览时，如果模块之间存在相同的依赖，并且依赖的版本号不一致，取最高版本号。
所以我这里有一个疑惑，为什么 layout 的更新一定要求模块全部更新，将这种依赖关系隔离不可行么？
回:平台的layout.tpl负责框架的结构。如
<header></header>
<div id="pf-content"><%= content %></div>

业务模块的auth.html
<p>业务</p >

最后打包后的auth.html为
<header></header>
<div id="pf-content"><p>业务</p ></div>

你们的设计太死板了，layout 的概念需要拆开，一个是资源，一个是布局。资源就是整个页面的基础框架，布局应该是可以自定义的。如果有必要，再拆一个页面的初始化脚本出来。
回:  我们目前有十几个布局，换布局了需要各各业务模块编译重新发包，之前使用java的velocity模版由于动态的，所以不存在此问题。但是目前没有nodejs，只能在上线前生成完整html，所以就形成了此依赖
模块应该是可以独立运行的，它为什么需要编译，编译了什么内容进去了？
先想办法去掉业务模块发布时对平台的依赖，而且必须解决这个问题。
平台发布，与模块的发布需要要变成解耦关系，互不干扰，最后的冲突问题，在页面生成时解决。
回：嗯，如果这样做，如果平台更新了，也要所有模块重新生成新的html。关键是我们各地研发都是内网，没有统一的发包环境来做持续集成。内网环境坑得很
回: 我们考虑各业务模块提交的安装包为源码，在可视化安装界面上统一编译，主要限制还是平台更新后，还是需要通过脚本来重新生成所有的html。所以我们想通过nginx动态来实现layout
我重新看了一遍你的问题描述，其实最大的问题在于你们固执地认为发出去的模块一定是要构建好的，构建可以只用于本地开发时的预览，发布时就不要发布构建的代码了，最后页面搭建完成的时候，统一构建，不行么？

回:这样可以啊，但是问题二没有解决。比如现在平台换了个layout，所有业务包需要重新生成html然后替换nginx服务中的。这个过程大家还是接受不了
小胡子哥 回复 ：  所以你们的架构中缺少一个源站呀！把 nginx 当大炮使，人家只是一杆枪而已。nginx 可以缓存资源，一旦缓存时间失效，比如三分钟，就应该去源站拉取资源，拉取的时候重新构建。这不就解决了所有业务需要更新的问题了么。
回：关键我们的服务比较特殊，比如某地市。系统直接部署在该地市的公安网内部，且和其他地市不互通，跟我们公司的内网或者局域网更加不通。，如果在互联网这些问题都不存在啊，肯定有持续集成了
平台做成分布式，网络不通就让数据互动好了。
不要想着绕过业务模块更新的问题，需要通过一些手段解决这个耦合问题。
回: 嗯，经验缺乏。目前觉得只有动态layout才可以在我们的场景下解决此问题。如果上了nodejs就可以解决了。目前后端不认可此方案。zf在安全方面抓的比较紧，可以全国互通的服务器很难申请到，所以分布式比较难

```

## 电信dns劫持
```
全站 https
这是比较方便快捷的方案，前端也可以做防御，但是会出现攻防战，费事费力，并不和谐。
```

## 产品负责人问了我一个问题:“悟空的师父敲了他的头三下，你怎么看？
```
既然是面试，既然是个问题，你就不要管问题的内容是否符合逻辑，是否正确。

这个问题，你可以根据西游记原著上写的直接回复面试官，这是第一步。第二步，可以吐槽，这里头存在傻逼逻辑，孙悟空怎么就知道半夜三更去找师傅呢？这不就是强拉因果么。

如果你并不知道原著，可以跟面试官沟通，了解他的真实意图是什么，到底要考核你胡诌的能力，还是要考核你设计思维。

总之，不能傻傻地说不知道，然后就没下文了。
```

## 以前的代码进行修改优化
```
了解产品逻辑，对过时逻辑做清理。

将大功能块拆分出来，作为单独模块维护。

设计一个你觉得更加合理的架构，否则也谈不上优化。
```

## 小公司我要成长
```
能力的提升一定要与当前主要工作挂钩，大多偏离主业的尝试都容易失去动力，最后落下个身心疲惫。

你所处的部门挺尴尬，人家找你进去是因为他们的前端能力太弱了，无法胜任一些简单的后台系统前端工作，其实看到了问题，你就应该想办法去解决这个问题。

可以思考能否将前端的能力赋能给他们，比如利用开源的一些东西去做一个平台，有些简单的工作就让他们自己拖拽或者搭建来完成。
```

## 复试问什么
```
不同公司情况不一样。复试一般考察的是面试者的能力（初试是知识），包括团队协作能力、编程能力、架构能力、沟通能力等等。

会更多地询问你工作上的一些细节问题，比如你遇到哪些困难，是如何解决这些困难的；再比如会问你工作中做过哪些偏向于团队的事情，具体是什么，带来了哪些收益等等。

没必要刻意准备什么，一晚上不会让你有质的变化。放松心态，从容面对。
```

## xss和csrf淘宝怎么防范
```
xss 的主要来源在于数据和传参，在输入的位置做强防御。

csrf，所有的非幂等请求都增加 token，然后增加 origin 判断，基本可以防御中下等能力的黑客（99％）。
```

## 前后端分离测试
```
后端需要做压力测试以及稳定性测试，跑持续集成。

前端做性能优化测试。

```

## mac翻墙
```
我用的是 GoAgentX，购买的 sslnext 的服务。一年大概三五百，忘记了。

翻墙，简单来说，就是链接一台服务器，这台服务器能够访问你访问不到的内容。
```

## 附录
前端工程师讲座稿，已收藏

> 刚来淘宝的时候，总喜欢做些小工具，给一小撮人带来便利，于是老板就开始说我啦，说我缺乏产品的思维。不过想想，那时候还真没有想过把一个功能做大，弄的能用了，也就罢手了。希望这个故事能给大家带来一点启发。

> 今天看了一个 TED 短视频，很有意思，说的是为什么人们有拖延症。
大致是这样的，人的脑子里装了三种生物，一个是正常安排工作的船长，做事情一丝不苟；有只猴子总是过来捣乱，猴子的价值观是简单快乐，所以一旦船长要开始干活了，猴子开始扰乱计划，做当下最轻松快乐的事情，结果事情只能往后拖延。
一旦事情到了快截止的时间，第三种生物"恐慌怪兽"就出现了，猴子怕它，躲开之后船长就可以正常工作了。
往往很多事情是没有截止时间的，这个时候恐慌怪兽一直不出来怎么办？视频中给了一个方法，给自己的生命画成几百个格子，每个格子代表一周或者一月，看着我们生命不断减少，此时恐慌怪兽就可能出现啦。
这让我记起了一句话：the trouble is you think you have time.

