# 高质量的子程序
> 子程序是迄今发明的用以节约空间和提高性能的最重要手段

### 创建子程序的正当理由
> 重要的事情说三遍:降低复杂度、降低复杂度、降低复杂度！   

具体而言，可以有:

1. 引入中间易懂的抽象
2. 避免代码重复
3. 支持子类化
4. 隐藏顺序，即不能依赖与另一个子程序的执行情况
5. 隐藏指针操作（不那么懂）
6. 提高可移植性
7. 简化复杂的bool判断，采取有意义易懂的命名等...
8. 改善性能
10. 确保所有子程序都很小

#### 过于简单而没有必要使用？
简单的操作有可能会被拓展，当你发现的时候可能需要更改十几个地方了，同时语义清晰也是一个考虑的因素。


### 在子程序上设计
是否内聚可以从以下几个方面进行提取:

1. 顺序
2. 通信，提炼更高层通信子程序控制具体操作的子程序
3. 临时, 如startup()

不可取的内聚性：

1. 过程，如依次获取员工的姓名、电话...
2. 逻辑，要几个子程序完成操作，要比通过传入标志位控制的子程序要好
3. 巧合，混乱


### 好的子程序名字
1. 子程序的长读视清晰度而定，没有长度限制(变量一般为9-15)
2. 不要仅仅通过数字形成
3. 需要对返回值有所描述
4. 给**过程命名时**采用语气强烈的动宾形式如：*PrintDocument*
5. 准确使用对仗此,如*open/close*
6. 为常用操作创建命名规则，否则久而久之就会变得不可维护


### 子程序可以写多长
> 总之，超过200行你就该小心了。


### 如何使用子程序参数
1. 按照输入->修改->输出的顺序排列参数
2. 考虑in/out关键字(不太懂)，大意是不好维护
3. 如果几个子程序采用了相同参数，那么最好排列也一致
4. 使用所有参数(没用的放那干嘛呢，误导人家)
5. 状态与出错变量该放到最后
6. 不要把子程序的参数用作工作变量
7. 在接口中对参数假定进行说明
8. 参数个数限制在**7个以内**
9. 对输入->修改->输出参数采用一定的命名规则,如**加下划线或前缀**
10. 为子程序传递维持接口抽象的对象或变量(如果要组装后才能传递或者处理后需要进行拆卸，那么往往是不合理的)
11. 使用具名参数，显示的把参数对应起来需要很麻烦但是会降低出错率。
12. 确保实际参数与形式参数想匹配

### 使用函数时需要考虑的问题
如果一个子程序的用途是返回其名字指明的返回值，那么就该用函数，否则该用过程。
设置返回值时需注意:  

1. 检查所有返回路径
2. 不要指向局部引用或指针

### 宏子程序与内联子程序
除非万不得已是不会使用宏子程序的，宏子程序的替代方案有:

1. const
2. inline
3. template
4. enum 
5. typeof

#### 内联子程序
性能上有优化，但是会生成多分代码，导致代码质量降低，很多情况下，并不需要使用


### 核对表[高质量子程序]