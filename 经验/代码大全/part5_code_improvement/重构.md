# 重构
> 当今软件开发越来越缺乏前瞻性

## 软件演化类型
其分为构建期与维护期，构建期的修改最随心所欲，修改成本也最低。
### 软件演化哲学
这是天赐良机，好好利用修正你的程序吧

## 重构简介
### 重构的理由
1. 代码重复
2. 冗长的子程序
3. 循环过长或者嵌套过深
4. 内聚性太差的类
5. 类的接口未能提供一致的抽象
6. 拥有太多的参数列表
7. 类的修改往往只局限于某个部分
8. 变化导致对多个类相同修改
9. 存在超前设计代码  

...
核对表（重构的理由）

## 特定的重构

### 数据级的重构
需要你灵巧的使用中间函数/变量/枚举等取代表达式；
对群组操作可以使用对象封装；使用数据类代替传统记录。

### 语句级重构
1. 分解布尔表达式，将其命名为准确的布尔函数
2. 使用 return/break 而不是循环变量、
3. 使用 if-then-else 立即返回，而不是给返回值赋值(***)
4. 多态来代替条件语句
5. 创建和使用 null 对象，而不是检测

### 子程序重构
* 用简单算法代替复杂算法
* 将复杂子程序抽象为类
* 将行为取决为参数子程序拆分开来
* 包装向下转型的操作  

...

### 类实现重构
* 特殊类提取为派生类
* 相同类提取为基类  

...

### 类接口重构
* 可以考虑用委托代替继承 / 用继承代替委托
* 删除不必要的类与中间件  

...

### 系统级重构
1. 为无法控制的数据创建索引源
2. 单项类 <-> 双向类
3. 用工厂模式构造类而非构造函数
4. 异常 <-> 错误代码  

...
核对表（重构总结）


## 安全的重构
关于怎样安全重构其实就是不要使得以前的代码丢了，以及怎样保证不出错(测试用例云云。。)
相对于大规模修改，小的改动更容易出错 :(  
此外最好评估下重构的风险级别  

### 不宜重构的情况
1. 需要重写的
2. 不要把重构当作先写后改的代名词


## 重构策略


